<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.disposable.main.dao.indexdao">
	<select id="storeList" resultType="java.util.Map" parameterType="java.util.Map">
	SELECT SP.* 
	,(SELECT COUNT(*) FROM SHOP) AS TOTALCNT
	FROM(
		SELECT STORENUM,STORENAME,PHOTO,ROWNUM as RM FROM SHOP
		) SP
		WHERE SP.RM > #{startPage} AND #{endPage} > SP.RM 
	</select>
	<select id="bestStoreList" resultType="java.util.Map" parameterType="java.util.Map">
		SELECT * FROM 
	(SELECT AA.*,ROWNUM AS RM FROM
	(SELECT *
	FROM (SELECT STORENUM,COUNT(*) AS ORDERCNT FROM ORDERFOOD GROUP BY STORENUM ORDER BY ORDERCNT) OFD
	INNER JOIN SHOP SH
	ON OFD.STORENUM = SH.STORENUM)AA)BB
	WHERE 11 > BB.rm
	</select>
</mapper>